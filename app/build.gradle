apply plugin: 'com.android.application'

repositories {
    mavenCentral()
}




android {
    signingConfigs {
        config {
            try {
                storeFile file("E:/GoogleDrive/Work/Cacophonoy/keystores/android.jks")
                storePassword KEYSTORE_PASSWORD
                keyAlias "myKey"
                keyPassword KEY_PASSWORD
            }
            catch (ex) {
                throw new InvalidUserDataException("You should define KEYSTORE_PASSWORD and KEY_PASSWORD in gradle.properties.")
            }
        }
    }
//    signingConfigs {
//        debug {
//            keyAlias 'myKey'
//            keyPassword 'Pppother1'
//            storeFile file('E:/GoogleDrive/Work/Cacophonoy/keystores/android.jks')
//            storePassword 'Pppother1'
//        }
//    }
    compileSdkVersion 27
    defaultConfig {
        applicationId "nz.org.cacophonoy.cacophonometer"
        // minSdkVersion 10 // 10 is the version that AMR_WB in MediaRecorder.AudioEncoder.AMR_WB was added which gives a lower limit on quality of recordings
        minSdkVersion 14
        // Increased to 14 to allow use of com.android.support:appcompat-v7:27.1.1 which was recommended by ?
        targetSdkVersion 22
        // less than 23 to prevent issue with asking for permissions. But if this is changed to 23 or greater, code already has logic to tell user to enable required permissions when record button is pressed.
        versionCode 1
        versionName "0.994"
        archivesBaseName = "Cacophonometer-$versionName"
        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
        //signingConfig signingConfigs.debug
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
            signingConfig signingConfigs.config
        }
        debug {
            //signingConfig signingConfigs.config
            signingConfig signingConfigs.config
        }
    }
    productFlavors {
    }
}

dependencies {
    implementation 'com.android.support.constraint:constraint-layout:1.0.2'
    implementation fileTree(include: ['*.jar'], dir: 'libs')
    //    implementation 'com.android.support:appcompat-v7:25.3.1'
    implementation 'com.android.support:appcompat-v7:27.1.1'
    implementation 'com.loopj.android:android-async-http:1.4.9'
    implementation 'org.apache.commons:commons-lang3:3.4'
    implementation 'com.android.support.test.espresso:espresso-idling-resource:2.2.2'
    // https://stackoverflow.com/questions/26633349/disable-ssl-as-a-protocol-in-httpsurlconnection
    implementation 'info.guardianproject.netcipher:netcipher:1.2'
    androidTestImplementation 'com.android.support:support-annotations:24.0.0'
    androidTestImplementation 'com.android.support.test:runner:0.5'
    androidTestImplementation 'com.android.support.test:rules:0.5'
    // Optional -- Hamcrest library
    androidTestImplementation 'org.hamcrest:hamcrest-library:1.3'
    // Optional -- UI testing with Espresso
    androidTestImplementation('com.android.support.test.espresso:espresso-core:2.2.2', {
        exclude group: 'com.android.support', module: 'support-annotations'
    })
    // Optional -- UI testing with UI Automator
    //  androidTestCompile 'com.android.support.test.uiautomator:uiautomator-v18:2.1.2'
    testImplementation 'junit:junit:4.12'
    testImplementation 'org.mockito:mockito-core:1.10.19'
}
